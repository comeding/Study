##### get请求文件流

1.api封装设置responseType属性

```js
responseType:'blob'
```

2.请求接口回调书写如下代码

```js
let blob = new Blob([response.data], { type: "application/zip" });
          let url = window.URL.createObjectURL(blob);
          const link = document.createElement("a"); // 创建a标签
          link.href = url;
          link.download = "相关资料"; // 重命名文件
          link.click();
          URL.revokeObjectURL(url); // 释放内存
          this.checkList = [];
```

##### el-upload上传文件解决跨域问题

1.设置el-upload执行前的方法： `:before-upload="beforeUpload"` 将文件转化为formdata数据上传(form上传没有跨域问题)

2.重写beforeUpload方法，请求上传接口

```js
beforeUpload(file){
      //将文件转换为formData
      let fd = new FormData()
      fd.append('file', file)
      //请求上传接口
      uploadFile(fd).then(response=>{})
}
```

##### 嵌套路由报错：

Redirected when going from "/" to "/newproject/index" via a navigation guard（服务端添加路由）

##### 改变el-Table表格的行高属性

```js
:row-style="{height:'70px'}"
```

##### 前端实现分页页功能

```js
currentPageData:[], //当前页显示数据
totalPage: 1, // 统共页数，默认为1
currentPage: 1, //当前页数 ，默认为1
pageSize: 2, // 每页显示数量
productList:[ //所有数据
```

```js
     mounted(){

            // 计算一共有几页
                    this.totalPage = Math.ceil(this.productList.length / this.pageSize);
            // 计算得0时设置为1
                    this.totalPage = this.totalPage == 0 ? 1 : this.totalPage;
                    this.setCurrentPageData();
            },
```

```js
  methods:{
            // 设置当前页面数据，对数组操作的截取规则为[0~10],[10~20]...,
        setCurrentPageData() {
                let begin = (this.currentPage - 1) * this.pageSize;
                let end = this.currentPage * this.pageSize;
                this.currentPageData = this.productList.slice(begin,end)
                },
                            //上一页
            prevPage() {
                    console.log(this.currentPage);
                    if (this.currentPage == 1) return;

                    this.currentPage--;
                    this.setCurrentPageData();

            },
            // 下一页
            nextPage() {
                    if (this.currentPage == this.totalPage)return ;

                    this.currentPage++;
                    this.setCurrentPageData();

                    },
  }
```

##### element自定义表单校验--mixins混入

- el-form设置`:rules:'rules`

- el-form-item中设置prop，对应验证字段

- 在data对象中书写

  ```js
  rules:{
     name：{
         validator:validatePass,//自定义校验方法
         trigger: 'blur' //触发事件
     }
  }
  ```

- 新建mixins文件夹index.js文件,编写校验方法

  ```js
  export const validatePass = (rule,value,callback)=>{
      let reg =/^(13[0-9]|14[01456879]|15[0-35-9]|16[2567]|17[0-8]|18[0-9]|19[0-35-9])\d{8}$/;
      if(!value){
          return callback(new Error('不能为空'))
      }
      else if(!reg.test(value)){
          return callback(new Error('请输入电话号码'))
      }
  }
  ```

- 到需要使用的组件import引入即可（引入数组内，要使用引号！）

  ```js
  import { validatePass } from '@//mixins/index'
  export default{
      mixins:['validatePass']
  }
  ```

  

##### 前端处理后端返回blob对象

```js
 var reader = new FileReader();
                    reader.readAsText(e.data,"utf-8");
                    reader.onload = function(){
                        //读取完毕后输出结果
                        console.log(this.result);
                    }
```

